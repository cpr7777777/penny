<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üîÆ Fortune Lottery</title>
<style>
body {
  font-family: Arial, sans-serif;
  text-align: center;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  background: #0b0c27;
  position: relative;
  min-height: 100vh;
}

body::before {
  content: '';
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: transparent url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg"><circle cx="2" cy="2" r="1" fill="white"/><circle cx="50" cy="80" r="0.5" fill="white"/><circle cx="100" cy="20" r="1" fill="white"/><circle cx="200" cy="60" r="0.8" fill="white"/><circle cx="300" cy="150" r="0.6" fill="white"/><circle cx="400" cy="30" r="0.7" fill="white"/><circle cx="500" cy="200" r="0.5" fill="white"/><circle cx="600" cy="120" r="0.6" fill="white"/></svg>') repeat;
  animation: moveStars 30s linear infinite;
  z-index: -1;
}

@keyframes moveStars {
  from {background-position: 0 0;}
  to {background-position: -1000px 1000px;}
}

h1 { margin: 20px 0 30px 0; color: #fff; }

#card-img {
  max-width: 200px;
  margin-top: 20px;
  display: block;
  border-radius: 8px;
  box-shadow: 0 0 10px #000;
  opacity: 0;
  transition: opacity 1s ease;
  margin-left: auto;
  margin-right: auto;
}

#fortune-text, #lottery-numbers {
  margin-top: 10px;
  font-size: 1.1rem;
  color: #fff;
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
  text-align: center;
  line-height: 1.4;
}

.sparkle {
  position: absolute;
  width: 5px;
  height: 5px;
  background: white;
  border-radius: 50%;
  opacity: 0;
}

#article {
  max-width: 700px;
  margin: 40px auto;
  padding: 20px;
  background: rgba(255,255,255,0.05);
  border-radius: 10px;
  color: #fff;
  text-align: left;
}

/* Quiz styling */
#quiz-container p {
  color: #fff;
  font-size: 18px;
  letter-spacing: 1px;
  text-shadow: 1px 1px 2px black;
}

#quiz-container input[type="text"] {
  color: black;
  font-size: 16px;
  padding: 6px;
  margin-top: 5px;
  margin-bottom: 10px;
  width: 250px;
  text-align: center;
  background: #fff;
  border: 1px solid #000;
  border-radius: 5px;
  caret-color: red;
}

#quiz-container button {
  padding: 12px 20px;
  font-size: 16px;
  margin: 5px;
  background: #ffd700;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  color: black;
  font-weight: bold;
}

#fortune-output {
  color: #8B0000;
  font-weight: bold;
  font-size: 18px;
  margin-top: 15px;
  text-shadow: 1px 1px 2px black;
}

#fortune-section button {
  padding: 15px 25px;
  font-size: 18px;
  background: #ffd700;
  color: black;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}

/* Scratch ticket */
#scratch-result {
  color:#8B0000;
  font-weight:bold;
  font-size:16px;
  margin-top:10px;
}
</style>
</head>
<body>

<h1>üé¥ Gypsy Fortune üé¥</h1>

<img id="card-img" src="" alt="Your card will appear here">
<p id="fortune-text"></p>
<p id="lottery-numbers"></p>

<div id="fortune-section" style="text-align:center; margin:20px 0;">
  <button id="startFortune">$1 Fortune</button>
</div>

<div id="quiz-container" style="display:none; text-align:center; margin-top:10px;">
  <div id="question-area"></div>
</div>

<div id="fortune-output" style="text-align:center;"></div>
<div id="article"></div>

<!-- Scratch Ticket -->
<div id="scratch-container" style="text-align:center; margin:40px 0;">
  <p style="color:#fff; font-size:18px;">üéüÔ∏è Scratch Your Luck!</p>
  <canvas id="scratch-canvas" width="300" height="100" style="border:2px solid #fff; cursor:pointer;"></canvas>
  <p id="scratch-result"></p>
</div>

<audio id="bg-music" loop>
  <source src="magic.mp3" type="audio/mpeg">
</audio>

<script>
// MUSIC
let musicStarted = false;
document.addEventListener('click', () => {
  if (!musicStarted) {
    const music = document.getElementById('bg-music');
    music.volume = 0.3;
    music.play().catch(()=>{});
    musicStarted = true;
  }
});

// Tarot cards
const cards = [
  "cards/the_fool.png","cards/the_magician.png","cards/the_high_priestess.png","cards/the_empress.png","cards/the_emperor.png",
  "cards/the_hierophant.png","cards/the_lovers.png","cards/the_chariot.png","cards/strength.png","cards/the_hermit.png",
  "cards/wheel_of_fortune.png","cards/justice.png","cards/the_hanged_man.png","cards/death.png","cards/temperance.png",
  "cards/the_devil.png","cards/the_tower.png","cards/the_star.png","cards/the_moon.png","cards/the_sun.png",
  "cards/judgement.png","cards/the_world.png"
];

const cardMeanings = {
  "the_fool.png":"New beginnings, innocence, adventure.",
  "the_magician.png":"You have the power to manifest your desires.",
  "the_high_priestess.png":"Trust your intuition and inner wisdom.",
  "the_empress.png":"Abundance, nurturing, and growth.",
  "the_emperor.png":"Structure, authority, and control.",
  "the_hierophant.png":"Tradition and spiritual guidance.",
  "the_lovers.png":"Choices in love and values.",
  "the_chariot.png":"Victory through determination.",
  "strength.png":"Courage and gentle power.",
  "the_hermit.png":"Introspection and wisdom.",
  "wheel_of_fortune.png":"Cycles of fate and luck.",
  "justice.png":"Fairness and truth.",
  "the_hanged_man.png":"New perspective through sacrifice.",
  "death.png":"Transformation and rebirth.",
  "temperance.png":"Balance and harmony.",
  "the_devil.png":"Beware unhealthy attachments.",
  "the_tower.png":"Sudden change brings clarity.",
  "the_star.png":"Hope and renewal.",
  "the_moon.png":"Illusion and intuition.",
  "the_sun.png":"Joy and success.",
  "judgement.png":"Awakening and reflection.",
  "the_world.png":"Completion and fulfillment."
};

function lottery(){
  let nums=[];
  for(let i=0;i<6;i++) nums.push(Math.floor(Math.random()*49)+1);
  return nums.join(', ');
}

function sparkle(){
  for(let i=0;i<15;i++){
    const s=document.createElement('div');
    s.className='sparkle';
    s.style.left=(Math.random()*window.innerWidth)+'px';
    s.style.top=(Math.random()*window.innerHeight)+'px';
    document.body.appendChild(s);
    setTimeout(()=>{s.remove()},1000);
  }
}

document.body.addEventListener('click',()=>{
  const card=cards[Math.floor(Math.random()*cards.length)];
  const img=document.getElementById('card-img');
  img.style.opacity=0;
  setTimeout(()=>{img.src=card;img.style.opacity=1},300);
  document.getElementById('fortune-text').innerText=
    cardMeanings[card.split('/').pop()]||"A mysterious fate awaits you.";
  document.getElementById('lottery-numbers').innerText="LUCKY Numbers: "+lottery();
  sparkle();
});

// Quiz
const questionPool = [
  {q:"Do shadows whisper your name?", type:"yesno"},
  {q:"Have you ever seen a cat dance at midnight?", type:"yesno"},
  {q:"If the moon melts, will you cry?", type:"yesno"},
  {q:"Pick a number that doesn‚Äôt exist:", type:"text"},
  {q:"What color is your invisible friend?", type:"text"},
  {q:"Write the sound of silence:", type:"text"},
  {q:"Your toast will land butter-side down‚Ä¶ how dramatic?", type:"text"},
  {q:"Someone waved at you‚Ä¶ but it wasn‚Äôt meant for you, did you panic?", type:"yesno"},
  {q:"You will confidently say something profound‚Ä¶ and immediately forget it.", type:"text"},
  {q:"Your coffee is slightly too hot‚Ä¶ what do you do?", type:"text"},
  {q:"You will attempt a heroic pose‚Ä¶ and trip over your own shadow.", type:"yesno"},
  {q:"Your favorite pen vanished‚Ä¶ what‚Äôs your reaction?", type:"text"},
  {q:"Your left sock declares independence‚Ä¶ will you negotiate?", type:"yesno"},
  {q:"You will sneeze at the worst possible moment‚Ä¶ how do you recover?", type:"text"}
];

let paid=false;
let currentQuestions = [];
let currentQuestionIndex = 0;
let answers=[];

// $1 Fortune button
document.getElementById("startFortune").onclick = () => {
  window.open("https://www.paypal.me/pennyBagsTrain");
  const btn = document.getElementById("startFortune");
  btn.textContent = "Processing payment...";
  btn.style.color = "black";
  btn.style.background = "#ffd700";
  btn.disabled = true;

  setTimeout(() => {
    paid = true;
    currentQuestions = questionPool.sort(() => 0.5 - Math.random()).slice(0,7);
    currentQuestionIndex = 0;
    document.getElementById("quiz-container").style.display = "block";
    showQuestion();
    btn.textContent = "$1 Fortune";
    btn.disabled = false;
    btn.style.color = "black";
    btn.style.background = "#ffd700";
  }, 30000);
};

function showQuestion(){
  const area=document.getElementById("question-area");
  area.innerHTML="";
  const q = currentQuestions[currentQuestionIndex];
  const p=document.createElement("p");
  p.textContent = q.q;
  area.appendChild(p);

  if(q.type==="yesno"){
    ["Yes","No"].forEach(v=>{
      const b=document.createElement("button");
      b.textContent=v;
      b.onclick=()=>{answers.push(1);nextQuestion();};
      area.appendChild(b);
    });
  }else{
    const i=document.createElement("input");
    i.type = "text";
    const b=document.createElement("button");
    b.textContent="Submit";
    b.onclick=()=>{answers.push(i.value.length||1);nextQuestion();};
    area.appendChild(i);
    area.appendChild(b);

    // Glitchy typing
    i.addEventListener('input', ()=> {
      let val = i.value.split('').map(c => Math.random()<0.1 ? ['$', '%','#','@','!','?','*','‚àÜ','‚óä','¬•'][Math.floor(Math.random()*10)] : c).join('');
      i.value = val;
    });
  }
}

function nextQuestion(){
  currentQuestionIndex++;
  if(currentQuestionIndex < currentQuestions.length) showQuestion();
  else{
    const fortunes = [
      "You will sneeze at the exact wrong moment and ruin a very important plan.",
      "Someone will wave at you‚Ä¶ but it wasn‚Äôt meant for you, and you‚Äôll look stupid.",
      "Your toast will land butter-side down in front of your most judgmental friend.",
      "You will confidently say something profound‚Ä¶ and immediately forget it.",
      "The coffee you need most will be slightly too hot and will scald your tongue.",
      "You will sit down to relax‚Ä¶ only to realize you‚Äôve been on the wrong Zoom call for 10 minutes.",
      "Your favorite pen will vanish into a mysterious void right when you need it.",
      "You will try to wink, but accidentally blink both eyes‚Ä¶ in front of everyone.",
      "Your socks will mysteriously disappear, leaving you with mismatched chaos.",
      "You will attempt a heroic pose‚Ä¶ and trip over your own shadow.",
      "Your alarm will go off‚Ä¶ but only in the nightmares you wish you were still asleep from.",
      "You will tell a joke that seemed funny in your head‚Ä¶ and silence will respond.",
      "Your bag will fall open in public‚Ä¶ revealing the weirdest items you forgot you owned.",
      "You will confidently walk into a room‚Ä¶ only to forget why you were there.",
      "Your favorite chair will betray you by squeaking at the exact wrong moment."
    ];
    document.getElementById("fortune-output").textContent =
      fortunes[Math.floor(Math.random()*fortunes.length)];
    document.getElementById("quiz-container").style.display="none";
    answers=[];
  }
}

// Scratch ticket
const canvas = document.getElementById('scratch-canvas');
const ctx = canvas.getContext('2d');
ctx.fillStyle = '#888';
ctx.fillRect(0,0,canvas.width,canvas.height);
ctx.globalCompositeOperation = 'destination-out';
let isDrawing = false;
canvas.addEventListener('mousedown', ()=>{isDrawing=true;});
canvas.addEventListener('mouseup', ()=>{isDrawing=false; checkScratch();});
canvas.addEventListener('mouseleave', ()=>{isDrawing=false;});
canvas.addEventListener('mousemove', (e)=>{
  if(!isDrawing) return;
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;
  ctx.beginPath();
  ctx.arc(x,y,15,0,Math.PI*2);
  ctx.fill();
});

function checkScratch(){
  const imageData = ctx.getImageData(0,0,canvas.width,canvas.height);
  let pixels = imageData.data;
  let transparentPixels = 0;
  for(let i=3;i<pixels.length;i+=4){
    if(pixels[i] < 128) transparentPixels++;
  }
  if(transparentPixels > pixels.length*0.6){
    document.getElementById('scratch-result').textContent = getPrize();
  }
}

function getPrize(){
  const prizes = [
    "üéâ You win 10 lucky numbers!",
    "üçÄ Free fortune!",
    "üíé You unlocked a secret card!",
    "‚ú® Surprise! Your toast will land butter-side up!",
    "üÉè Minor mischief awaits‚Ä¶"
  ];
  return prizes[Math.floor(Math.random()*prizes.length)];
}

// Load article
fetch('article.html')
  .then(r=>r.text())
  .then(t=>document.getElementById('article').innerHTML=t);

</script>
</body>
</html>
